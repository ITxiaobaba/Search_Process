package crawler;import org.jsoup.*;import org.jsoup.Connection;import org.jsoup.nodes.Document;import org.jsoup.nodes.Element;import org.jsoup.select.Elements;import java.io.BufferedWriter;import java.io.File;import java.io.FileWriter;import java.io.IOException;import java.sql.ResultSet;import java.sql.SQLException;import java.util.ArrayList;public class DownloadTxtE {    private static DB db=new DB();    //从数据库获取所有URL并存入urlList中    public static ArrayList<String> getUrl() throws SQLException {        ArrayList<String> urlList=new ArrayList<>();        String sql="select * from enrecord";        ResultSet rs=db.runSql(sql);        while(rs.next()){            String url=rs.getString("URL");            urlList.add(url);        }        return urlList;    }    public static void getContent(String url,int i) throws InterruptedException, IOException {        //链接到目标地址        Connection connect = Jsoup.connect(url);        //设置useragent,设置超时时间，并以get请求方式请求服务器        Document document = connect.userAgent("Mozilla/4.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)").timeout(6000).ignoreContentType(true).get();        Thread.sleep(1000);        //获取指定标签的数据        Elements elementByClass = document.getElementsByClass("fr-view");        //输出文本数据        System.out.println(elementByClass.text());        String fileName="F://CrawlerSourceTxtE/Stories_1_"+i+"rg.txt";        File file=new File(fileName);        if(!file.exists()){            file.createNewFile();        }        try {            writeCharBuffer(elementByClass.text(),fileName);        } catch (Exception e) {            e.printStackTrace();        }    }    private static void writeCharBuffer(String contentString, String fileName) throws Exception {        FileWriter fw=new FileWriter(fileName);        BufferedWriter bw=new BufferedWriter(fw,40);        bw.newLine();        bw.write(contentString);        bw.close();        fw.close();        System.out.println("写入成功");    }    public static void main(String[] args) throws Exception {        for(int i=475;i<=1314;i++){            String url="https://www.wuxiaworld.com/novel/a-will-eternal/awe-chapter-"+i;            getContent(url,i);        }    }}